# qstring
# More usefull stuff for Qt by KDE at http://websvn.kde.org/trunk/KDE/kdesdk/scripts/kde-devel-gdb
define printqstring
    printf "(QString)0x%x (length=%i): \"",&$arg0,$arg0.d->size
    set $i=0
    while $i < $arg0.d->size
        set $c=$arg0.d->data[$i++]
        if $c < 32 || $c > 127
                printf "\\u0x%04x", $c
        else
                printf "%c", (char)$c
        end
    end
    printf "\"\n"
end

# https://github.com/ellzey/dotfiles/blob/master/gdbinit
define dumptailq
	set $tailq_head = $arg0
	set $ent        = (($tailq_head)->tqh_first)

	while ($ent != (void *)0l)
		print *$ent
		set $ent = ($ent)->next.tqe_next
	end
end
document dumptailq
	Print a sys/queue.h TAILQ structure, assumes TAILQ_ENTRY is next
	Usage: dumptailq tailq head
end

define tbt
	thread apply all bt
end
document tbt
	Print backtrace of all running threads
end

